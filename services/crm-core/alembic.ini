# =============================================================================
# Alembic Configuration File
#
# This file is read by `alembic` commands (upgrade, downgrade, revision, etc.)
# It should be committed to version control — it contains no secrets.
# The actual DATABASE_URL is injected at runtime via env.py, which reads the
# DATABASE_URL environment variable rather than the sqlalchemy.url below.
# =============================================================================

[alembic]
# Path to the migration scripts directory (relative to this file).
script_location = alembic

# Python path for migration scripts.
# %(here)s is substituted with the directory containing this alembic.ini file.
prepend_sys_path = .

# Template for naming new auto-generated migration files.
# Format: YYYY-MM-DD_HH-MM-SS_<revision>_<slug>
# Example: 2026-02-27_10-30-00_a1b2c3d4_add_leads_table.py
file_template = %%(year)d-%%(month).2d-%%(day).2d_%%(hour).2d-%%(minute).2d-%%(second).2d_%%(rev)s_%%(slug)s

# Truncate the slug (description) in auto-generated filenames to this length.
truncate_slug_length = 40

# Timezone for %%(year)d etc. in file_template.
# Use UTC so filenames are consistent regardless of developer locale.
timezone = UTC

# If true, revision numbers in migration files are padded to a fixed width.
revision_environment = false

# Whether to emit the current date in the migration docstring.
sourceless = false

# Maximum revision age for "alembic history" output (not relevant to runtime).
# version_locations can be used for multi-branch migration trees; leave empty
# for a linear history.
# version_locations =

# ---------------------------------------------------------------------------
# sqlalchemy.url is intentionally left empty here.
# env.py reads DATABASE_URL from the environment variable at runtime, which
# supports all environments (local, CI, production) without editing this file.
# ---------------------------------------------------------------------------
sqlalchemy.url =

# ---------------------------------------------------------------------------
# Logging configuration (standard Python logging dictConfig format).
# alembic and sqlalchemy loggers are separated so SQL echo can be toggled
# independently from the alembic operation log.
# ---------------------------------------------------------------------------
[loggers]
keys = root, sqlalchemy, alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
# Set to INFO to echo SQL statements during migrations (useful for debugging).
# WARNING: this is very verbose — do not set to DEBUG in CI/CD pipelines.
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S
